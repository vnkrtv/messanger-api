# Домашнее задание к 6 лекции

Необходимо написать unit- и интеграционные тесты на код, написанный в предыдущих домашних заданиях.

## Обязательная часть:
- создать папку tests в корне проекта
- добиться покрытия 50% кода тестами
- покрыть тестами ручку ping_db на 100%
- использовать: flake8, pytest, unittest.mock

## Бонусная часть:
- добиться покрытия 70% кода тестами
- написать e2e тест: регистрация пользователей, общение между ними в чате, получение отправленных и принятых сообщений
- покрыть тестами защиту от роботов - [пункт 5](https://wiki.yandex.ru/backend/domashnie-zadanija-shbr/domashnee-zadanie-4/#uslovie) из домашнего задания к 4 лекции

## Порядок выполнения и сдачи домашней работы
Домашнее задание предполагает кросс-проверку: каждый студент будет проверять работы двух других студентов. По возможности менторы тоже могут дать свои комментарии к домашкам. 

Что нужно сделать:
1. Сделать форк репозитория
2. Отвести ветку из `master` с названием `solution` 
3. Выполнить домашнее задание и сделать Merge Request[^1] в ветку `master` (в своем форке)
4. Выдать доступ проверяющим студентам из тикетов к своему форку (с ролью developer) используя почту @yandex.ru (нужно кликнуть на имя исполнителя в Тикете и на страничке исполнителя будет указан адрес почты)
5. Добавить комментарий со ссылкой на Merge Request в тикеты


Папка с кодом и ресурсами для тестов находится в tests корневой папки проекта.
1. Нужно к библиотеке `pytest` установить пакет-плагин `pytest-cov`
2. Дописать в конфигурационный файлик `pytest.ini` опцию `--cov .`
3. Запустить тесты. После завершения тестов на экран выведется статистика и финальный процент покрытия.
P.S. Если добавить опцию `--cov-report=html`, то рядом появится красивая интерактивная html-ка с более подробной статистикой.


## Чеклист:
- проверить, что в тестах подключен статический анализ (flake8)
- проверить процент покрытия кода тестами
- хорошо ли структурированы тесты?
- отсутствие тестов примитивных методов (геттеров, сеттеров и других методов с подобной простой логикой), отсутствие тестов чужих библиотек
- все ли граничные случаи проверяются в тестах?
- не слишком ли много всего проверяется в тестах? Может быть, стоит их разбить на несколько более простых?
